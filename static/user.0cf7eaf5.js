import{d as v,E as oe,g as ee,w as P,b as g,G as ae,M as ce,k as W,y as H,l as K,aq as te,r as E,ah as re,i as ue,J as le,a4 as ie,Y as M,Q as de,bf as fe,bg as ve}from"./entry.67902e5c.js";function Ee(e){return e==null}class pe extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function Ue(e,t){throw new pe(`[${e}] ${t}`)}function ke(e,t){}const We="update:modelValue",Ke="change",me=["class","style"],Te=/^on[A-Z]/,xe=(e={})=>{const{excludeListeners:t=!1,excludeKeys:s}=e,o=v(()=>((s==null?void 0:s.value)||[]).concat(me)),a=ee();return a?v(()=>{var r;return oe(Object.entries((r=a.proxy)==null?void 0:r.$attrs).filter(([u])=>!o.value.includes(u)&&!(t&&Te.test(u))))}):v(()=>({}))},Ve=({from:e,replacement:t,scope:s,version:o,ref:a,type:r="API"},u)=>{P(()=>g(u),T=>{},{immediate:!0})},B={prefix:Math.floor(Math.random()*1e4),current:0},be=Symbol("elIdInjection"),ge=()=>ee()?ce(be,B):B,$e=e=>{const t=ge(),s=ae();return v(()=>g(e)||`${s.value}-id-${t.prefix}-${t.current++}`)};let b=[];const Y=e=>{const t=e;t.key===te.esc&&b.forEach(s=>s(t))},Fe=e=>{W(()=>{b.length===0&&document.addEventListener("keydown",Y),H&&b.push(e)}),K(()=>{b=b.filter(t=>t!==e),b.length===0&&H&&document.removeEventListener("keydown",Y)})},U="focus-trap.focus-after-trapped",k="focus-trap.focus-after-released",Ie="focus-trap.focusout-prevented",q={cancelable:!0,bubbles:!1},ye={cancelable:!0,bubbles:!1},G="focusAfterTrapped",J="focusAfterReleased",_e=Symbol("elFocusTrap"),x=E(),A=E(0),V=E(0);let S=0;const ne=e=>{const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const a=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||a?NodeFilter.FILTER_SKIP:o.tabIndex>=0||o===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t},X=(e,t)=>{for(const s of e)if(!we(s,t))return s},we=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},Se=e=>{const t=ne(e),s=X(t,e),o=X(t.reverse(),e);return[s,o]},he=e=>e instanceof HTMLInputElement&&"select"in e,m=(e,t)=>{if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),V.value=window.performance.now(),e!==s&&he(e)&&t&&e.select()}};function Q(e,t){const s=[...e],o=e.indexOf(t);return o!==-1&&s.splice(o,1),s}const Ce=()=>{let e=[];return{push:o=>{const a=e[0];a&&o!==a&&a.pause(),e=Q(e,o),e.unshift(o)},remove:o=>{var a,r;e=Q(e,o),(r=(a=e[0])==null?void 0:a.resume)==null||r.call(a)}}},Pe=(e,t=!1)=>{const s=document.activeElement;for(const o of e)if(m(o,t),document.activeElement!==s)return},Z=Ce(),Ae=()=>A.value>V.value,h=()=>{x.value="pointer",A.value=window.performance.now()},z=()=>{x.value="keyboard",A.value=window.performance.now()},Le=()=>(W(()=>{S===0&&(document.addEventListener("mousedown",h),document.addEventListener("touchstart",h),document.addEventListener("keydown",z)),S++}),K(()=>{S--,S<=0&&(document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",h),document.removeEventListener("keydown",z))}),{focusReason:x,lastUserFocusTimestamp:A,lastAutomatedFocusTimestamp:V}),C=e=>new CustomEvent(Ie,{...ye,detail:e}),Re=ue({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[G,J,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const s=E();let o,a;const{focusReason:r}=Le();Fe(n=>{e.trapped&&!u.paused&&t("release-requested",n)});const u={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},T=n=>{if(!e.loop&&!e.trapped||u.paused)return;const{key:c,altKey:i,ctrlKey:d,metaKey:f,currentTarget:l,shiftKey:$}=n,{loop:j}=e,se=c===te.tab&&!i&&!d&&!f,w=document.activeElement;if(se&&w){const O=l,[N,D]=Se(O);if(N&&D){if(!$&&w===D){const p=C({focusReason:r.value});t("focusout-prevented",p),p.defaultPrevented||(n.preventDefault(),j&&m(N,!0))}else if($&&[N,O].includes(w)){const p=C({focusReason:r.value});t("focusout-prevented",p),p.defaultPrevented||(n.preventDefault(),j&&m(D,!0))}}else if(w===O){const p=C({focusReason:r.value});t("focusout-prevented",p),p.defaultPrevented||n.preventDefault()}}};le(_e,{focusTrapRef:s,onKeydown:T}),P(()=>e.focusTrapEl,n=>{n&&(s.value=n)},{immediate:!0}),P([s],([n],[c])=>{n&&(n.addEventListener("keydown",T),n.addEventListener("focusin",y),n.addEventListener("focusout",_)),c&&(c.removeEventListener("keydown",T),c.removeEventListener("focusin",y),c.removeEventListener("focusout",_))});const F=n=>{t(G,n)},I=n=>t(J,n),y=n=>{const c=g(s);if(!c)return;const i=n.target,d=n.relatedTarget,f=i&&c.contains(i);e.trapped||d&&c.contains(d)||(o=d),f&&t("focusin",n),!u.paused&&e.trapped&&(f?a=i:m(a,!0))},_=n=>{const c=g(s);if(!(u.paused||!c))if(e.trapped){const i=n.relatedTarget;!Ee(i)&&!c.contains(i)&&setTimeout(()=>{if(!u.paused&&e.trapped){const d=C({focusReason:r.value});t("focusout-prevented",d),d.defaultPrevented||m(a,!0)}},0)}else{const i=n.target;i&&c.contains(i)||t("focusout",n)}};async function L(){await M();const n=g(s);if(n){Z.push(u);const c=n.contains(document.activeElement)?o:document.activeElement;if(o=c,!n.contains(c)){const d=new Event(U,q);n.addEventListener(U,F),n.dispatchEvent(d),d.defaultPrevented||M(()=>{let f=e.focusStartEl;de(f)||(m(f),document.activeElement!==f&&(f="first")),f==="first"&&Pe(ne(n),!0),(document.activeElement===c||f==="container")&&m(n)})}}}function R(){const n=g(s);if(n){n.removeEventListener(U,F);const c=new CustomEvent(k,{...q,detail:{focusReason:r.value}});n.addEventListener(k,I),n.dispatchEvent(c),!c.defaultPrevented&&(r.value=="keyboard"||!Ae()||n.contains(document.activeElement))&&m(o??document.body),n.removeEventListener(k,I),Z.remove(u)}}return W(()=>{e.trapped&&L(),P(()=>e.trapped,n=>{n?L():R()})}),K(()=>{e.trapped&&R()}),{onKeydown:T}}});function Oe(e,t,s,o,a,r){return ie(e.$slots,"default",{handleKeydown:e.onKeydown})}var je=re(Re,[["render",Oe],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const He=fe("user",()=>{const e=E(null),t=E(null),s=E(null),o=E({show:!1,url:""}),a=E(""),r=E(!1),u=v(()=>e.value),T=v(()=>t.value),F=v(()=>s.value),I=v(()=>o.value),y=v(()=>a.value),_=v(()=>r.value);return{dialogError:o,accountsWalletAddress:e,accountWalletItem:s,web3ConfigItem:t,rdnsType:a,getAccountsWalletAddress:u,getWeb3ConfigItem:T,getAccountWalletItem:F,getDialogError:I,getRdns:y,getWalletSelectionDialogVisible:_,setWalletSelectionDialogVisible:l=>{r.value=l},setRdnsType:l=>{a.value=l},setAccountsWalletAddress:l=>{e.value=l.toLowerCase()},setweb3ConfigItem:l=>{t.value=l},setAccountWalletItem:l=>{s.value=l},setDialogError:l=>{o.value=l},cleaUserInfo:()=>{t.value=null,s.value=null,e.value="",r.value=!1,a.value="",o.value={show:!1,url:""}}}},{persist:[{paths:["accountWalletItem","accountsWalletAddress","web3ConfigItem","rdnsType"],storage:ve.cookiesWithOptions({maxAge:604800})}]});export{Ke as C,je as E,_e as F,We as U,$e as a,xe as b,Ve as c,ke as d,He as e,Ee as i,Ue as t,ge as u};
